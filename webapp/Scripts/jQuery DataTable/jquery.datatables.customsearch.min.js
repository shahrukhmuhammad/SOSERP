/*! jQuery DataTables Custom Search Plugin - v0.8 (2014-04-07) | Copyright 2014 Timothy Ruhle; Licensed MIT */
(function(n,t,i){"use strict";var r=function(n,t){var r=function(t,i){if(!(this instanceof r))throw'Warning: CustomSearch must be initialised with the keyword "new".';if(!n.fn.dataTableExt.fnVersionCheck("1.10.0"))throw"Warning: CustomSearch requires DataTables 1.10 or greater.";return this.c={fields:[],container:"",hideStandardSearch:!1},this.s={dt:null,init:null,table:null},this.init(t,i),this};return r.prototype={init:function(u,f){var s=this,o,h,c,d,e,b=[],y=[],l,p,a,w,k,v;if(this.s.dt=new t.Api(u).settings()[0],this.s.init=f||{},this.s.table=n(this.s.dt.nTable),n.extend(!0,this.c,r.defaults,f),this.c.hideStandardSearch===!0&&n("#"+this.s.dt.sInstance+"_filter").hide(),this.c.fields===null||this.c.fields===i||this.c.fields.length===0)for(this.c.fields=[],o=0;o<this.s.dt.aoColumns.length;o++)this.c.fields.push(o);for(n.isArray(this.c.fields)||(this.c.fields=[this.c.fields]),o=0;o<this.c.fields.length;o++){if(e=this.c.fields[o],(!isNaN(e)||n.isArray(e))&&(e={columns:e}),e.columns=n.isArray(e.columns)?e.columns:[e.columns],e.columns.sort(),e.multiple=this.getMultiple(e.multiple),e.type=this.getType(e.type,e.columns),e.range=this.getRange(e.range),e.label=this.getLabel(e.label,e.range,e.columns),e.id=this.getId(o,e.range,e.field),e.advanced=this.getAdvanced(e.advanced,e.range,e.id,e.type),e.server=this.getServer(e.server,e.id),e.caseInsensitive=e.caseInsensitive!==!1,e.smart=e.smart===!0,e=this.getField(e),this.c.fields[o]=e,e.range.length===0)y.push(e.id);else for(d in e.id)y.push(e.id[d]);e.advanced&&e.advanced.id&&y.push(e.advanced.id);b.push(e.fullField)}if(this.c.fields.sort(this.sortBySubArray),this.c.container==="thead"||this.c.container==="thead:before"||this.c.container==="thead:after"||this.c.container==="tfoot"||this.c.container==="tfoot:before"||this.c.container==="tfoot:after")for(l=this.c.container.indexOf("thead")>=0?"thead":"tfoot",p=this.s.table.find(l),a=0,w=1,k="prependTo",this.c.container===l+":after"&&(k="appendTo"),p.length===0&&this.s.table.append("<"+l+">"),p=this.s.table.find(l),v=n("<tr>")[k](p),v.addClass("dt-search"),o=0;o<this.c.fields.length;o++)for(h=0;h<this.c.fields[o].columns.length;h++){while(this.c.fields[o].columns[h]>a)v.append(n("<td>")),a++;if(this.c.fields[o].columns.length===1)v.append(n("<td>").append(this.c.fields[o].field));else{for(w=1,c=h+1;c<this.c.fields[o].columns.length;c++)if(this.c.fields[o].columns[c]===this.c.fields[o].columns[h]+1)w++,a++;else break;v.append(n("<td>").attr("colspan",w).append(n(this.c.fields[o].field)));h=c}a++}else this.c.container?n(this.c.container).append("<div>"+b.join("")+"<\/div>"):n(this.s.dt.nTableWrapper).prepend("<div>"+b.join("")+"<\/div>");if(n("#"+y.join(",#")).bind("keyup change",function(t){if(t.keyCode==13)return!1;if(s.s.dt.oInit.serverSide){var i=s.s.dt.ajax;for(typeof i=="string"&&(i={url:i,data:{}}),i.data.customsearch={},o=0;o<s.c.fields.length;o++)i.data.customsearch[s.c.fields[o].server]=n("#"+s.c.fields[o].id).val();s.s.dt.ajax=i}s.s.table.DataTable().draw()}),this.s.dt.oInit.serverSide||this.s.table.dataTable().DataTable.ext.search.push(function(n,t,i){return s.search(n,t,i)}),n.isFunction(this.c.after))this.s.table.on("search.dt",function(n,t){var r=t.aiDisplay,u=s.s.table.DataTable().data(),e=[],o=[],i=t._iDisplayStart,f=t._iDisplayStart+t._iDisplayLength;for(f>u.length&&(f=u.length),f>r.length&&(f=r.length);i<f;i++)e.push(u[r[i]]);for(i=0;i<r.length;i++)o.push(u[r[i]]);s.c.after(e,o,u)})},search:function(t,i){for(var u,f,e,s,r,h,c,o=0;o<this.c.fields.length;o++)if(r=this.c.fields[o],c=r.advanced?n("#"+r.advanced.id).val():!1,r.range.length===0){if(e=n("#"+r.id).val(),e||(e=""),e.length){if(f=!1,r.type!="date"||c){for(h=[],u=0;u<r.columns.length;u++)h.push(i[r.columns[u]]);this.searchString(h.join(" "),e,c,r.caseInsensitive,r.smart)&&(f=!0)}else for(u=0;u<r.columns.length;u++)if(this.searchDate(i[r.columns[u]],e)){f=!0;break}if(f===!1)return!1}}else{for(s={min:this.hasRange("min",r.range)?n("#"+r.id.min).val():"",max:this.hasRange("max",r.range)?n("#"+r.id.max).val():""},f=!1,u=0;u<r.columns.length;u++)if(r.type=="date"){if(this.searchDateRange(i[r.columns[u]],s)){f=!0;break}}else if(this.searchNumberRange(i[r.columns[u]],s)){f=!0;break}if(f===!1)return!1}return!0},searchString:function(n,t,i,r,u){return t!==null&&t.length?this.searchStringAdvanced(n,t,i,r,u):!0},searchStringAdvanced:function(t,i,r,u){var f=0,e,o;for(u&&(t=t.toLowerCase()),e=parseInt(t,10),n.isArray(i)||(i=[i]);f<i.length;f++)if(u&&(i[f]=i[f].toLowerCase()),o=parseInt(i[f],10),r&&r!="contains"||t.search(i[f])==-1){if(r=="not-contains"&&t.search(i[f])==-1||r=="equal"&&t==i[f]||r=="not-equal"&&t!=i[f]||r=="greater"&&e>o||r=="less"&&e<o||r=="begins"&&t.indexOf(i[f])===0)return!0}else return!0;return!1},searchNumberRange:function(n,t){return(n=parseInt(n.replace(/[^\d]/i,""),10),t.min=parseInt(t.min,10),t.max=parseInt(t.max,10),isNaN(n))?!1:isNaN(t.min)&&isNaN(t.max)||isNaN(t.min)&&t.max>=n||t.min<=n&&isNaN(t.max)||t.min<=n&&t.max>=n},searchDate:function(n,t){return n=new Date(n),t=new Date(t),this.isValidDate(n)&&n==t},searchDateRange:function(n,t){return(n=new Date(n),t.min=new Date(t.min),t.max=new Date(t.max),!this.isValidDate(n))?!1:!this.isValidDate(t.min)&&!this.isValidDate(t.max)||!this.isValidDate(t.min)&&t.max>=n||t.min<=n&&!this.isValidDate(t.max)||t.min<=n&&t.max>=n},isValidDate:function(n){return Object.prototype.toString.call(n)==="[object Date]"&&!isNaN(n.getTime())},getRange:function(t){var r=[],u=!1,f=!1;return typeof t=="string"&&(r=t.split(",")),n.isArray(t)&&(u=this.hasRange("min",t),f=this.hasRange("max",t),r=u&&f?["min","max"]:u&&!f?["min"]:!u&&f?["max"]:[]),t===i&&(r=[]),t===!0&&(r=["min","max"]),r},getField:function(t){var i=n(t.field);return t.field&&i.length!==0||(i=this.createField(t)),i},createField:function(t){var i;t.fieldLabel=[];t.field=[];switch(t.type){case"string":t.label&&(t.fieldLabel='<label for="'+t.id+'">'+t.label+"<\/label>");t.field=t.advanced.field+'<input class="form-control input-sm" type="text" placeholder="'+t.label.toLowerCase()+'" id="'+t.id+'">';break;case"number":t.range.length===0?(t.label&&(t.fieldLabel='<label for="'+t.id+'">'+t.label+"<\/label>"),t.field=t.advanced.field+'<input  class="form-control input-sm" type="number" placeholder="'+t.label.toLowerCase()+'" id="'+t.id+'">'):(this.hasRange("min",t.range)&&(t.label&&t.fieldLabel.push('<label for="'+t.id.min+'">'+t.label.min+"<\/label>"),t.field.push('<input  class="form-control input-sm" type="number" placeholder="'+t.label.toLowerCase()+'" id="'+t.id.min+'">')),this.hasRange("max",t.range)&&(t.label&&t.fieldLabel.push('<label for="'+t.id.max+'">'+t.label.max+"<\/label>"),t.field.push('<input  class="form-control input-sm" type="number" placeholder="'+t.label.toLowerCase()+'" id="'+t.id.max+'">')));break;case"select":for(t.label&&(t.fieldLabel='<label for="'+t.id+'">'+t.label+"<\/label>"),t.field=t.advanced.field+'<select  class="form-control input-sm" placeholder="'+t.label.toLowerCase()+'" id="'+t.id+'"',t.multiple&&(t.field+=' multiple="multiple"'),t.field+=">",n.isArray(t.options)&&t.options.length!==0?t.multiple||t.options.unshift({value:"",text:"All"}):(t.options=t.multiple?[]:[{value:"",text:"All"}],n.each(this.s.dt.aoData,function(i,r){n.inArray(r._aData[t.columns],t.options)===-1&&t.options.push(r._aData[t.columns])})),i=0;i<t.options.length;i++)t.field+=typeof t.options[i]=="object"?'<option value="'+t.options[i].value+'">'+t.options[i].text+"<\/option>":'<option value="'+t.options[i]+'">'+t.options[i]+"<\/option>";t.field+="<\/select>";break;case"date":t.range.length===0?(t.label&&(t.fieldLabel='<label for="'+t.id+'">'+t.label+"<\/label>"),t.field=t.advanced.field+'<input  class="form-control input-sm" type="date" placeholder="'+t.label.toLowerCase()+'" id="'+t.id+'">'):(this.hasRange("min",t.range)&&(t.label&&t.fieldLabel.push('<label for="'+t.id.min+'">'+t.label.min+"<\/label>"),t.field.push('<input  class="form-control input-sm" type="date" placeholder="'+t.label.toLowerCase()+'" id="'+t.id.min+'">')),this.hasRange("max",t.range)&&(t.label&&t.fieldLabel.push('<label for="'+t.id.max+'">'+t.label.max+"<\/label>"),t.field.push('<input  class="form-control input-sm" type="date" placeholder="'+t.label.toLowerCase()+'" id="'+t.id.max+'">')));break;default:throw"Warning: CustomSearch init failed due to invalid field type given - "+t.type;}if(t.fullField="",n.isArray(t.field))for(i=0;i<t.field.length;i++)t.fullField+=t.fieldLabel[i],t.fullField+=t.field[i];else t.fullField+=t.fieldLabel,t.fullField+=t.field;return t},getMultiple:function(n){return n===!0},getId:function(t,i,r){var f=this.s.dt.sInstance+"_"+t,u,e;return i.length===0?u=f:(u={},this.hasRange("min",i)&&(u.min=f+"_min"),this.hasRange("max",i)&&(u.max=f+"_max")),n(r).length>0&&(e=n(r).attr("id"),e?u=e:n(r).attr("id",u)),u},getAdvanced:function(n,t,i,r){var f="",e,s=i+"_advanced",o=r=="number"||r=="date",u=[["contains","Contains",!o],["not-contains","Does Not Contain",!1],["equal","Is Equal To",o],["not-equal","Is Not Equal To",!1]];if(o?(u.push(["greater","Is Greather Than",!1]),u.push(["less","Is Less Than",!1])):u.push(["begins","Begins With",!1]),n===!0&&t.length===0){for(f+='<select  class="form-control input-sm" placeholder="'+field.label.toLowerCase()+'" id="'+s+'">',e=0;e<u.length;e++)f+='<option value="'+u[e][0]+'"',u[e][2]&&(f+=' selected="selected"'),f+=">"+u[e][1]+"<\/option>";return f+="<\/select>",{id:s,field:f}}return{id:"",field:""}},getServer:function(n,t){return n?n:t},getLabel:function(n,t,r){var u="",f;if(n===i){for(n=[],f=0;f<r.length;f++)n.push(this.s.dt.aoColumns[r[f]].sTitle);n=n.join(" & ")}return t.length===0?u=n:(u={},this.hasRange("min",t)&&(u.min="Min "+n),this.hasRange("max",t)&&(u.max="Max "+n)),u},getType:function(n,t){var i=n;return i||(t.length==1?(i=this.s.dt.aoColumns[t[0]].sType,(i=="num"||i=="currency"||i=="num-fmt")&&(i="number")):i="string"),i.toLowerCase()},hasRange:function(t,i){return n.inArray(t,i)>=0},sortBySubArray:function(t,i){var r=t.columns,u=i.columns;return n.isArray(r)&&(r=Math.min.apply(Math,r)),n.isArray(u)&&(u=Math.min.apply(Math,u)),r-u}},t.CustomSearch=r,r};typeof define=="function"&&define.amd?define("datatables-customsearch",["jquery","datatables"],r):jQuery&&!jQuery.fn.dataTable.CustomSearch&&r(jQuery,jQuery.fn.dataTable)})(window,document);
/*
//# sourceMappingURL=jquery.datatables.customsearch.min.js.map
*/