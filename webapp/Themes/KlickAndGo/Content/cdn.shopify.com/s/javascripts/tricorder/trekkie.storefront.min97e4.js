!function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=7)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(t,r){this.options={},this.options=e.merge(t,r)}return e.merge=function(e,t){var r={};for(var n in e)r[n]=e[n];for(var n in t)r[n]=t[n];return r},e.flatten=function(t){var r=e.merge(t,{});return r.properties={},e.merge(r,t.properties)},e.isEqual=function(e,t){for(var r in e)if(e[r]!==t[r])return!1;for(var r in t)if(t[r]!==e[r])return!1;return!0},e}();t.Integration=n},function(e,t,r){"use strict";function n(){return"https://v.shopify.com/"}function o(e){var t=[];for(var r in e)("number"==typeof e[r]||e[r])&&("object"==typeof e[r]&&0===Object.keys(e[r]).length||t.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r])));return t.join("&")}function i(e){var t=new Image(1,1);return t.src=e,t.style.display="none",t}function a(e,t,r){return i(n()+e+"/"+t+"?"+o(r))}function c(e){u=e}function s(e,t){return a("internal_errors","page",{name:e.name,line:e.lineNumber||e.line,script:e.fileName||e.sourceURL||e.script,stack:e.stackTrace||e.stack||e.description,message:e.message,url:window.location,context:void 0!==t?t:null,appConfig:u||null})}Object.defineProperty(t,"__esModule",{value:!0}),t.base=n,t.queryString=o,t.img=i,t.load=a;var u=void 0;t.setGlobalSerializedAppConfig=c,t.internalError=s},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),i={viewedProduct:/^[ _]?viewed[ _]?product[ _]?$/i,viewedProductCategory:/^[ _]?viewed[ _]?product[ _]?category[ _]?$/i,viewedProductVariant:/^[ _]?viewed[ _]?product[ _]?variant[ _]?$/i,addedProduct:/^[ _]?added[ _]?product[ _]?$/i,completedOrder:/^[ _]?completed[ _]?order[ _]?$/i,startedOrder:/^[ _]?started[ _]?order[ _]?$/i,performedSearch:/^[ _]?performed[ _]?search[ _]?$/i,addedPayment:/^[ _]?added[ _]?payment[ _]?$/i},a=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.wrapTrack(),n}return n(t,e),t.prototype.wrapTrack=function(){var e=this.track;this.track=function(t){var r=t.event,n=!1;for(var o in i){var a=i[o];if(this[o]&&a.test(r)){this[o].apply(this,[t]),n=!0;break}}n||e.apply(this,Array.prototype.slice.call(arguments))}},t}(o.Integration);t.EcommerceIntegration=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(14);t.exportVar="trekkie",t.trekkieClass=n.Trekkie,t.enabledIntegrations=[];var o=r(11);t.enabledIntegrations.push(["Performance",o.Performance]);var i=r(9);t.enabledIntegrations.push(["Facebook Pixel",i.FacebookPixel]);var a=r(10);t.enabledIntegrations.push(["Google Analytics",a.GoogleAnalytics]);var c=r(8);t.enabledIntegrations.push(["Clickstream",c.Clickstream]);var s=r(12);t.enabledIntegrations.push(["Pinterest Pixel",s.Pinterest]);var u=r(13);t.enabledIntegrations.push(["Session Attribution",u.SessionAttribution])},function(e,t,r){"use strict";function n(e){return t.cookie.read(e)}function o(e,t,r){void 0===r&&(r={}),a(e,t,r.permanent,i(window.location.hostname)),a(e,t,r.permanent,d),a(e,t,r.permanent,r.domain),a(e,t,r.permanent,"")}function i(e){var t=e.indexOf(u);return 0===t?"."+e:t>0?e.slice(t-1):p}function a(e,r,n,o){var i={maxage:n?s:c,domain:o,path:"/"};t.cookie.write(e,r,i)}Object.defineProperty(t,"__esModule",{value:!0});var c=18e5,s=62208e6,u="shopify",p=".shopify.com",d=".myshopify.com";t.cookie={parse:function(e){for(var t={},r=0,n=e.split(/ *; */);r<n.length;r++){var o=n[r],i=o.split("=");try{t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}catch(e){}}return t},read:function(e){if(t.cookie.enabled())return t.cookie.parse(document.cookie)[e]},write:function(e,r,n){if(void 0===n&&(n={}),t.cookie.enabled()){var o=encodeURIComponent(e)+"="+encodeURIComponent(r);return n.maxage&&(n.expires=new Date(Date.now()+n.maxage)),n.path&&(o+="; path="+n.path),n.domain&&(o+="; domain="+n.domain),n.expires&&(o+="; expires="+n.expires.toUTCString()),n.secure&&(o+="; secure"),document.cookie=o,o}},clear:function(e,r){return void 0===r&&(r={}),r.maxage=-1,t.cookie.write(e,"",r)},enabled:function(){try{return void 0!==document.cookie&&window.navigator.cookieEnabled}catch(e){return!1}}},t.read=n,t.write=o,t.shopifyCookieDomain=i},function(e,t,r){"use strict";function n(){return!!p.read(t.shortTermKey)||!!p.read(t.deprecatedShortTermKey)}function o(){return!!p.read(t.longTermKey)||!!p.read(t.deprecatedLongTermKey)}function i(){return l.fetchOrSet(!1,t.deprecatedShortTermKey,t.shortTermKey)}function a(){return l.fetchOrSet(!0,t.deprecatedLongTermKey,t.longTermKey)}function c(){return l.build()}function s(){return h.fetchOrSet(t.firstSeenKey)}function u(){return l.hexTime()}Object.defineProperty(t,"__esModule",{value:!0});var p=r(4);t.deprecatedShortTermKey="_s",t.shortTermKey="_shopify_s",t.deprecatedLongTermKey="_y",t.longTermKey="_shopify_y",t.firstSeenKey="_shopify_fs";var d="00000000",f="xxxx-4xxx-xxxx-xxxxxxxxxxxx",l={fetch:function(e){return p.read(e)},fetchOrSet:function(e,t,r){if(!p.cookie.enabled())return"00000000-0000-0000-4000-000000000000";var n=l.fetch(r)||l.fetch(t)||l.build(),o={permanent:e};return p.write(t,n,o),p.write(r,n,o),n},build:function(){var e="";try{var t=window.crypto||window.msCrypto,r=new Uint16Array(31);t.getRandomValues(r);var n=0;e=f.replace(/[x]/g,function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];var i=r[n]%16,a="x"===e?i:3&i|8;return n++,a.toString(16)}).toUpperCase()}catch(t){e=f.replace(/[x]/g,function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=16*Math.random()|0;return("x"===e?n:3&n|8).toString(16)}).toUpperCase()}return l.hexTime()+"-"+e},hexTime:function(){var e=0,t=0;try{e=Date.now()>>>0}catch(t){e=(new Date).getTime()>>>0}try{t=performance.now()>>>0}catch(e){t=0}var r=Math.abs(e+t).toString(16).toLowerCase();return d.substr(0,8-r.length)+r}},h={fetch:function(e){return p.read(e)},fetchOrSet:function(e){var t=h.fetch(e)||(new Date).toJSON(),r={permanent:!0};return p.write(e,t,r),t}};t.hasShortTerm=n,t.hasLongTerm=o,t.shortTerm=i,t.longTerm=a,t.buildToken=c,t.firstSeen=s,t.hexTime=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),o=r(3),i=r(1),a=function(){function e(e,t){this.integrations=[];var r=1+o.enabledIntegrations.length,n=this.waitFor(r,function(){try{t()}catch(e){i.internalError(e)}});this.trekkie=new o.trekkieClass(e.Trekkie,n),this.integrations.push(this.trekkie);for(var a=0,c=o.enabledIntegrations;a<c.length;a++){var s=c[a],u=e[s[0]],p=s[1];if(u&&"object"==typeof u)try{this.integrations.push(new p(u,this.trekkie,n))}catch(e){n(),i.internalError(e)}else n()}}return e.prototype.identify=function(e,t){void 0===e&&(e=""),void 0===t&&(t={});try{e instanceof Object&&(t=e,e="");for(var r=0,n=this.integrations;r<n.length;r++){n[r].identify({id:e,properties:t})}}catch(e){i.internalError(e)}},e.prototype.page=function(e,t){void 0===e&&(e=""),void 0===t&&(t={});try{e instanceof Object&&(t=e,e="");var r=this.pageDefaults();r.name=e,r.properties=n.Integration.merge(r.properties,t);for(var o=0,a=this.integrations;o<a.length;o++){a[o].page(r)}}catch(e){i.internalError(e)}},e.prototype.track=function(e,t){void 0===e&&(e=""),void 0===t&&(t={});try{e instanceof Object&&(t=e,e="");for(var r=0,n=this.integrations;r<n.length;r++){n[r].track({event:e,properties:t})}}catch(e){i.internalError(e)}},e.prototype.trackForm=function(e,t,r){var n=this;void 0===t&&(t=""),void 0===r&&(r={});try{e.addEventListener("submit",function(o){o.preventDefault(),n.track(t,r),setTimeout(function(){try{e.submit()}catch(e){i.internalError(e)}},0)})}catch(e){i.internalError(e)}},e.prototype.trackLink=function(e,t,r){var n=this;void 0===t&&(t=""),void 0===r&&(r={});try{e.addEventListener("click",function(o){var i=e.getAttribute("href")||e.getAttributeNS("http://www.w3.org/1999/xlink","href")||e.getAttribute("xlink:href");n.track(t,r),i&&"_blank"!==e.target&&!n.isMeta(o)&&(o.preventDefault(),setTimeout(function(){n.setLocation(i)},0))})}catch(e){i.internalError(e)}},e.prototype.isMeta=function(e){if(e instanceof KeyboardEvent&&(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey))return!0;if(e instanceof MouseEvent){var t=e.which,r=e.button;if(!t&&void 0!==r)return 1===r||2===r;if(2===t)return!0}return!1},e.prototype.setLocation=function(e){window.location.href=e},e.prototype.ready=function(e){setTimeout(e,0)},e.prototype.waitFor=function(e,t){return function(){--e>0||0===e&&setTimeout(t,0)}},e.prototype.pageDefaults=function(){var e=window.location.href,t=e.indexOf("?");return e=-1===t?"":e.slice(t),t=e.indexOf("#"),e=-1===t?e:e.slice(0,t),e="?"===e?"":e,{path:window.location.pathname,referrer:document.referrer,search:e,title:document.title,url:this.url(),properties:{}}},e.prototype.canonical=function(){for(var e=document.getElementsByTagName("link"),t=0;t<e.length;t++){var r=e[t];if("canonical"===r.getAttribute("rel"))return r.getAttribute("href")}return""},e.prototype.url=function(){var e=this.canonical();if(e)return e.indexOf("?")>0?e:e+window.location.search;var t=window.location.href,r=t.indexOf("#");return-1===r?t:t.slice(0,r)},e}();t.Tricorder=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6),o=r(3),i=r(1);try{var a=window[o.exportVar].config;if(a){i.setGlobalSerializedAppConfig(JSON.stringify(a));var c=window[o.exportVar],s=window.trekkie=new n.Tricorder(a,function(){window[o.exportVar]=s,window._visit={tag:function(){},multitrackToken:function(){return s.trekkie.defaultAttributes.uniqToken}},s.user=function(){return{traits:function(){return{uniqToken:s.trekkie.defaultAttributes.uniqToken}}}};for(var e=0,t=c;e<t.length;e++){var r=t[e],n=r[0];s[n]&&s[n].apply(s,r.slice(1))}})}}catch(e){i.internalError(e)}},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),i=r(17),a=r(18),c=r(1),s=function(e){function t(t,r,n){var o=e.call(this,{},t)||this;o.requestType="clickstream",o.config={storageKey:"_trekkie_cs",eventName:"click",customEventName:"trekkie-clickstream",validTargets:["a","button","input","select"],validInputSubTypes:["submit","file","radio","checkbox","text","email","search","tel","url","password","number","range","button","reset"],safeInputSubTypes:["submit","radio","checkbox","button","reset"],appName:null,flushInterval:5},o.trekkie=r,o.config.appName=r.options.appName;var i=t.flushInterval;return void 0!==i&&"number"==typeof i&&(o.config.flushInterval=i),"iframe"===r.options.embedMode?o.clickQueue=o.createPostingQueue():o.clickQueue=o.createPersistedQueue(),o.flushClickEvents(),o.setClickListener(),o.setFlushInterval(),n(),o}return n(t,e),t.prototype.identify=function(e){},t.prototype.page=function(e){this.flushClickEvents()},t.prototype.track=function(e){var t=this;e.event===this.config.eventName&&setTimeout(function(){t.trekkie.emit(t.requestType,e)},0)},t.prototype.createPostingQueue=function(){return new a.PostingQueue(this.trekkie,this.requestType,this.config.eventName)},t.prototype.createPersistedQueue=function(){return new i.PersistedQueue(this.config.storageKey)},t.prototype.setFlushInterval=function(){var e=this;this.config.flushInterval>0&&setInterval(function(){e.flushClickEvents()},1e3*this.config.flushInterval)},t.prototype.flushClickEvents=function(){for(var e=0,t=this.clickQueue.all();e<t.length;e++){var r=t[e];this.track({event:this.config.eventName,properties:r})}this.clickQueue.clear()},t.prototype.setClickListener=function(){var e=this;document.documentElement.addEventListener("click",function(t){e.trackClick(t)},!0)},t.prototype.trackClick=function(e){try{var t=this.preparePayload(this.resolveRawClickEvent(e));if(!t)return;this.clickQueue.push(t);try{var r=this.trekkie.options,n={detail:t};"iframe"===r.embedMode&&r.embedParentOrigin?this.trekkie.getEmbedParent().postMessage(JSON.stringify({event:"trekkie:customEvent:v1",payload:{eventType:this.config.customEventName,data:n}}),r.embedParentOrigin):document.dispatchEvent(new CustomEvent(this.config.customEventName,n))}catch(e){}}catch(e){c.internalError(e)}},t.prototype.preparePayload=function(e){if(!e.resolved)return null;var t=e.clicked;return{app_name:this.config.appName,url:window.location.href,target_text:this.getTextLabelFromHTMLElement(t),target_tagname:t.tagName,target_classname:this.getClassName(t),target_id:t.id,target_trekkie_context:e.data&&Object.getOwnPropertyNames(e.data).length>0?JSON.stringify(e.data):null,target_url:t.getAttribute("href"),target_form_input_type:this.isHTMLFormInputSubType(t)?t.type:null,target_form_action:this.isHTMLFormInputSubType(t)?this.getHTMLFormAction(t):null,target_form_relative_position:this.isHTMLFormInputSubType(t)?this.getFormRelativePosition(t):null}},t.prototype.resolveRawClickEvent=function(e){for(var t=e.target,r={clicked:t,resolved:void 0,data:{}};t;){!r.resolved&&this.shouldTrack(t)&&(r.resolved=t);for(var n=0,o=Array.prototype.slice.call(t.attributes);n<o.length;n++){var i=o[n];i&&i.value&&!r.data[i.name]&&i.name.match(/^data-trekkie-.*/)&&(r.data[i.name]=i.value)}t=this.parentElement(t)}return r},t.prototype.parentElement=function(e){var t=e.parentNode;return t.parentNode?t:void 0},t.prototype.shouldTrack=function(e){var t=e.tagName?e.tagName.toLowerCase():"";return"input"===t?this.config.validInputSubTypes.indexOf(e.type.toLowerCase())>=0:this.config.validTargets.indexOf(t)>=0},t.prototype.getClassName=function(e){return"object"==typeof e.className?e.parentElement.getAttribute("class"):e.className},t.prototype.getTextLabelFromHTMLElement=function(e){switch(e.tagName.toLowerCase()){case"input":return this.config.safeInputSubTypes.indexOf(e.type)>-1?e.value:e.name;case"select":var t=e.options.selectedIndex;return t>-1?e.options[t].text:"No value chosen";default:return this.getTargetText(e)||this.getTextLabelFromParentHTMLElement(e)}},t.prototype.getTextLabelFromParentHTMLElement=function(e){for(;e.parentNode;)if(e=e.parentNode,e.tagName&&-1!==this.config.validTargets.indexOf(e.tagName.toLowerCase()))return this.getTargetText(e)},t.prototype.getTargetText=function(e){var t=e.innerText||e.textContent;if(t)return this.dedupTargetText(t.replace(/\s+/g," ").trim())},t.prototype.dedupTargetText=function(e){if(-1===e.indexOf(" "))return e;var t={};return e.split(" ").filter(function(e){return!t.hasOwnProperty(e)&&(t[e]=!0)}).join(" ")},t.prototype.getHTMLFormAction=function(e){for(;e.parentNode;)if((e=e.parentNode)&&e.tagName&&"form"===e.tagName.toLowerCase()){var t=e.attributes.getNamedItem("action");if(t&&t.value)return t.value}return""},t.prototype.isHTMLFormInputSubType=function(e){return-1!==["input","select"].indexOf(e.tagName.toLowerCase())},t.prototype.getFormRelativePosition=function(e){switch(e.tagName.toLowerCase()){case"select":return e.options.selectedIndex;default:return null}},t}(o.Integration);t.Clickstream=s},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),i=function(e){function t(r,n,o){var i=e.call(this,t.defaultOptions,r)||this;return i.initialize(o),i}return n(t,e),t.prototype.identify=function(e){throw new Error("identify is not supported")},t.prototype.page=function(e){window.fbq("track","PageView")},t.prototype.track=function(e){var t={};for(var r in e.properties)"revenue"===r?t.value=this.formatRevenue(e.properties.revenue):t[r]=e.properties[r]},t.prototype.viewedProductCategory=function(e){},t.prototype.viewedProductVariant=function(e){},t.prototype.viewedProduct=function(e){var t=e.properties;window.fbq("track","ViewContent",{content_ids:this.getProductContentIds(t),content_type:this.getProductContentType(t),content_name:t.name||"",content_category:t.category||"",currency:this.getCurrency(t.currency),value:this.formatRevenue(t.price)})},t.prototype.addedProduct=function(e){var t=e.properties;window.fbq("track","AddToCart",{content_ids:this.getProductContentIds(t),content_type:this.getProductContentType(t),content_name:t.name||"",content_category:t.category||"",currency:this.getCurrency(t.currency),value:this.formatRevenue(t.price),num_items:this.getProductNumItems(t)})},t.prototype.addedPayment=function(e){var t=e.properties;window.fbq("track","AddPaymentInfo",{currency:this.getCurrency(t.currency),value:this.formatRevenue(t.total)})},t.prototype.performedSearch=function(e){var t=e.properties;window.fbq("track","Search",{search_string:t.query||""})},t.prototype.startedOrder=function(e){var t=e.properties;window.fbq("track","InitiateCheckout",{content_ids:this.getOrderContentIds(t),content_type:this.getOrderContentType(t),currency:this.getCurrency(t.currency),value:this.formatRevenue(t.revenue),num_items:this.getOrderNumItems(t)})},t.prototype.completedOrder=function(e){var t=e.properties;window.fbq("track","Purchase",{content_ids:this.getOrderContentIds(t),content_type:this.getOrderContentType(t),currency:this.getCurrency(t.currency),value:this.formatRevenue(t.revenue),num_items:this.getOrderNumItems(t)})},t.prototype.initialize=function(e){this.loadFacebookScript();for(var t=this.options,r=t.pixelIds.concat([t.pixelId]),n=0,o=r;n<o.length;n++){var i=o[n];null!==i&&""!==i&&(window.fbq("init",i),""!==t.agent&&window.fbq("set","agent",t.agent,i))}e()},t.prototype.loadFacebookScript=function(){if(!window.fbq){window.fbq=function(){window.fbq.callMethod?window.fbq.callMethod.apply(window.fbq,arguments):window.fbq.queue.push(arguments)},window._fbq||(window._fbq=window.fbq),window.fbq.push=window.fbq,window.fbq.loaded=!0,window.fbq.version="2.0",window.fbq.queue=[];var e=document.createElement("script");e.async=!0,e.src="https://connect.facebook.net/en_US/fbevents.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}},t.prototype.formatRevenue=function(e){return Number(e||0).toFixed(2)},t.prototype.getCurrency=function(e){return e||"USD"},t.prototype.getProductContentIds=function(e){var t=e.productId||e.variantId||e.sku;return t?[t]:[]},t.prototype.getProductContentType=function(e){return e.productId?"product_group":"product"},t.prototype.getProductNumItems=function(e){return e.quantity||this.getProductContentIds(e).length},t.prototype.getProductKey=function(e){return e.productId||e.variantId||e.sku},t.prototype.getOrderContentIds=function(e){for(var t=[],r=e.products||[],n=0,o=r;n<o.length;n++){var i=o[n],a=this.getProductKey(i);if(a){-1===t.indexOf(a)&&t.push(a)}}return t},t.prototype.getOrderContentType=function(e){for(var t=e.products||[],r=0,n=t;r<n.length;r++){if(n[r].productId)return"product_group"}return"product"},t.prototype.getOrderNumItems=function(e){for(var t=0,r=e.products||[],n=0,o=r;n<o.length;n++){var i=o[n];this.getProductKey(i)&&(t+=i.quantity||1)}return t},t.defaultOptions={pixelId:"",pixelIds:[],agent:""},t}(o.EcommerceIntegration);t.FacebookPixel=i},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),i=r(2),a=function(e){function t(r,n,o){var i=e.call(this,t.defaultOptions,r)||this;return i.pageCalled=!1,i.ecommerce=!1,i.enhancedEcommerceLoaded=!1,i.initialize(o),i}return n(t,e),t.prototype.identify=function(e){throw new Error("identify is not supported")},t.prototype.page=function(e){this.overrideDefaultPageProperties(e);var t=this.options,r=this.path(e),n=e.name||e.title,o={page:r,title:n};window.ga("set",o);var i={page:r,title:n,location:e.url};if(this.pageCalled&&delete i.location,window.ga("send","pageview",i),e.name&&t.trackNamedPages){var a=this.convertPageToTrack(e);a.properties.nonInteraction=!0,this.trackInternal(a)}this.pageCalled=!0},t.prototype.track=function(e){},t.prototype.trackInternal=function(e){var t=this.options,r=e.properties,n={eventAction:e.event,eventCategory:r.category||"All",eventLabel:r.label,eventValue:this.formatValue(r.value||r.revenue),nonInteraction:!!(r.hasOwnProperty("nonInteraction")?r.nonInteraction:t.nonInteraction)};window.ga("send","event",n)},t.prototype.completedOrder=function(e){var t=e.properties,r=t.total||t.revenue||0,n=t.orderId,o=t.products||[];if(n){this.ecommerce||(window.ga("require","ecommerce"),this.ecommerce=!0),window.ga("ecommerce:addTransaction",{affiliation:t.affiliation,shipping:t.shipping,revenue:r,tax:t.tax,id:n,currency:this.getCurrency(t.currency)});for(var i=0,a=o;i<a.length;i++){var c=a[i],s=this.createProductTrack(t,c);window.ga("ecommerce:addItem",{category:s.category,quantity:this.getProductQuantity(s),price:s.price,name:s.name,sku:s.sku||s.variantId,id:n,currency:this.getCurrency(s.currency)})}window.ga("ecommerce:send")}},t.prototype.viewedProductVariant=function(e){},t.prototype.viewedProductEnhanced=function(e){var t=e.properties;this.loadEnhancedEcommerce(e),this.enhancedEcommerceProductAction(t,"detail"),this.pushEnhancedEcommerce(e)},t.prototype.addedProductEnhanced=function(e){var t=e.properties;this.loadEnhancedEcommerce(e),this.enhancedEcommerceProductAction(t,"add"),this.pushEnhancedEcommerce(e)},t.prototype.startedOrderEnhanced=function(e){var t=e.properties,r=t.products||[];this.loadEnhancedEcommerce(e);for(var n=0,o=r;n<o.length;n++){var i=o[n],a=this.createProductTrack(t,i);this.enhancedEcommerceTrackProduct(a)}window.ga("ec:setAction","checkout",{step:t.step||1}),this.pushEnhancedEcommerce(e)},t.prototype.completedOrderEnhanced=function(e){var t=e.properties,r=t.total||t.revenue||0,n=t.orderId,o=t.products||[];if(n){this.loadEnhancedEcommerce(e);for(var i=0,a=o;i<a.length;i++){var c=a[i],s=this.createProductTrack(t,c);this.enhancedEcommerceTrackProduct(s)}window.ga("ec:setAction","purchase",{id:n,affiliation:t.affiliation,revenue:r,tax:t.tax,shipping:t.shipping,coupon:t.coupon}),this.pushEnhancedEcommerce(e)}},t.prototype.hostname=function(){return window.location.hostname},t.prototype.initialize=function(e){this.pageCalled=!1,this.loadGAScript();var r=this.options;"localhost"===this.hostname()&&(r.domain="none"),r.enhancedEcommerce&&this.enhancedEcommerce(),window.ga("create",r.trackingId,{cookieDomain:r.domain||t.defaultOptions.domain,siteSpeedSampleRate:r.siteSpeedSampleRate,sampleRate:r.sampleRate,allowLinker:!0}),r.doubleClick&&window.ga("require","displayfeatures"),r.enhancedLinkAttribution&&window.ga("require","linkid"),r.anonymizeIp&&window.ga("set","anonymizeIp",!0),e()},t.prototype.loadGAScript=function(){window.GoogleAnalyticsObject="ga",window.ga=window.ga||function(){(window.ga.q=window.ga.q||[]).push(arguments)},window.ga.l=(new Date).getTime();var e=document.createElement("script");e.async=!0,e.src="https://www.google-analytics.com/analytics.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)},t.prototype.enhancedEcommerce=function(){this.viewedProduct=this.viewedProductEnhanced,this.addedProduct=this.addedProductEnhanced,this.startedOrder=this.startedOrderEnhanced,this.completedOrder=this.completedOrderEnhanced},t.prototype.path=function(e){var t=e.path;return this.options.includeSearch&&e.search&&(t+=e.search),t},t.prototype.formatValue=function(e){return!e||e<0?0:Math.round(e)},t.prototype.getProductQuantity=function(e){return e.quantity||1},t.prototype.getCurrency=function(e){return e||"USD"},t.prototype.createProductTrack=function(e,t){var r=o.Integration.merge(t,{});return r.currency=t.currency||this.getCurrency(e.currency),r},t.prototype.loadEnhancedEcommerce=function(e){this.enhancedEcommerceLoaded||(window.ga("require","ec"),this.enhancedEcommerceLoaded=!0);var t=e.properties;window.ga("set","&cu",this.getCurrency(t.currency))},t.prototype.enhancedEcommerceTrackProduct=function(e){var t={id:e.sku||e.variantId,name:e.name,category:e.category,quantity:this.getProductQuantity(e),price:e.price,brand:e.brand,variant:e.variant,currency:this.getCurrency(e.currency)};e.coupon&&(t.coupon=e.coupon),window.ga("ec:addProduct",t)},t.prototype.pushEnhancedEcommerce=function(e){var t=e.properties;window.ga("send","event",{eventCategory:t.category||"EnhancedEcommerce",eventAction:e.event||"Action not defined",eventLabel:t.label,nonInteraction:!0})},t.prototype.enhancedEcommerceProductAction=function(e,t){this.enhancedEcommerceTrackProduct(e),window.ga("ec:setAction",t)},t.prototype.convertPageToTrack=function(e){return{event:e.name?"Viewed "+e.name+" Page":"Loaded a Page",properties:e.properties}},t.prototype.overrideDefaultPageProperties=function(e){for(var t in e.properties)"properties"!==t&&"name"!==t&&t in e&&(e[t]=e.properties[t])},t.defaultOptions={anonymizeIp:!1,domain:"auto",doubleClick:!1,enhancedEcommerce:!1,enhancedLinkAttribution:!1,includeSearch:!1,nonInteraction:!1,siteSpeedSampleRate:1,sampleRate:100,trackNamedPages:!0,trackingId:""},t}(i.EcommerceIntegration);t.GoogleAnalytics=a},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),i=function(e){function t(r,n,o){var i=e.call(this,t.defaultOptions,r)||this;return i.trekkie=n,o(),i}return n(t,e),t.prototype.identify=function(e){},t.prototype.page=function(e){var t={event:"navigation_performance_metrics",properties:o.Integration.flatten(e)},r=this.options;r.navigationTimingApiMeasurementsEnabled&&r.navigationTimingApiMeasurementsSampleRate>=Math.random()&&(t.properties=o.Integration.merge(this.pagePerformance(),t.properties),this.trekkie.track(t))},t.prototype.track=function(e){},t.prototype.pagePerformance=function(){return(new a).collect()},t.defaultOptions={navigationTimingApiMeasurementsEnabled:!0,navigationTimingApiMeasurementsSampleRate:.001},t}(o.Integration);t.Performance=i;var a=function(){function e(){}return e.prototype.timing=function(){return!(!window.performance||!window.performance.timing)&&window.performance.timing},e.prototype.userAgent=function(){return window.navigator.userAgent},e.prototype.collect=function(){var t=this,r={},n=function(){for(var t=0,n=e.perfAttrs;t<n.length;t++){var o=n[t];r["nt:"+o]=0}r["nt:valid"]=!1};if(this.timing()&&!function(){return new RegExp("MSIE 9.0|Firefox/7.0|Firefox/8.0").test(t.userAgent())}())try{for(var o=0,i=e.perfAttrs;o<i.length;o++){var a=i[o];r["nt:"+a]=this.timing()[a]}r["nt:valid"]=!0}catch(e){n()}else n();return r},e.perfAttrs=["connectEnd","connectStart","domComplete","domContentLoadedEventEnd","domContentLoadedEventStart","domInteractive","domLoading","domainLookupEnd","domainLookupStart","fetchStart","loadEventEnd","loadEventStart","navigationStart","redirectEnd","redirectStart","requestStart","responseEnd","responseStart","secureConnectionStart","unloadEventEnd","unloadEventStart"],e}();t.PagePerformance=a},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),i=r(1),a=function(e){function t(r,n,o){var i=e.call(this,t.defaultOptions,r)||this;return o(),i}return n(t,e),t.prototype.identify=function(e){},t.prototype.page=function(e){},t.prototype.track=function(e){},t.prototype.completedOrder=function(e){var t=this.options;i.img("https://ct.pinterest.com/v2.5/?tid="+t.pixelId+"&event=checkout&value=0.00&quantity=1")},t.defaultOptions={pixelId:""},t}(o.EcommerceIntegration);t.Pinterest=a},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=r(4),i=r(5),a=r(0);t.sessionAttributionEventKey="session-attribution",t.sessionAttributionParamsKey="_shopify_sa_p",t.sessionAttributionTimestampKey="_shopify_sa_t";var c=function(e){function r(t,r,n){var o=e.call(this,{},t)||this;return o.trekkie=r,o.timestampManager=new s,o.campaignManager=new u,setTimeout(function(){o.attributeSession()},0),n(),o}return n(r,e),r.prototype.identify=function(e){},r.prototype.page=function(e){},r.prototype.track=function(e){var r=this;e.event===t.sessionAttributionEventKey&&setTimeout(function(){r.trekkie.emit(t.sessionAttributionEventKey,e)},0)},r.prototype.attributeSession=function(){var e=new Date,r=window.location.search,n=this.campaignManager.constructCanonicalUtmString(r);this.timestampManager.isValid(e)&&this.campaignManager.isValid(n)||this.track({event:t.sessionAttributionEventKey,properties:{sa_url:window.location.href,sa_referrer:window.document.referrer,sa_utm_string:n,sa_token:i.buildToken()}}),this.timestampManager.extend(e.toJSON()),this.campaignManager.extend(n)},r}(a.Integration);t.SessionAttribution=c;var s=function(){function e(){}return e.prototype.fetch=function(){return o.read(t.sessionAttributionTimestampKey)},e.prototype.extend=function(e){o.write(t.sessionAttributionTimestampKey,e,{permanent:!1})},e.prototype.isValid=function(e){var t=this.fetch();if(!t)return!1;try{var r=new Date(t);if(r.getUTCDate()<e.getUTCDate())return!1;if(e.getTime()-r.getTime()>18e5)return!1}catch(e){return!1}return!0},e}();t.TimestampManager=s;var u=function(){function e(){}return e.prototype.fetch=function(){return o.read(t.sessionAttributionParamsKey)},e.prototype.extend=function(e){o.write(t.sessionAttributionParamsKey,e,{permanent:!1})},e.prototype.isValid=function(e){return""===e||this.fetch()===e},e.prototype.constructCanonicalUtmString=function(t){if(""===t||void 0===t||null===t||"?"===t)return"";t="?"===t[0]?t.slice(1):t;for(var r={},n=0,o=t.split("&");n<o.length;n++){var i=o[n],a=i.split("="),c=this.decodeReplacingPlus(a[0]),s=this.decodeReplacingPlus(a[1]);s&&c&&(r[c]=s)}return e.acceptedQueryStringParams.filter(function(e){return r[e]}).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(r[e])}).join("&")},e.prototype.decodeReplacingPlus=function(e){return decodeURIComponent(e.replace(/\+/g," "))},e.acceptedQueryStringParams=["utm_source","utm_medium","utm_campaign","utm_term","utm_content","ref"],e}();t.CampaignManager=u},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),i=r(1),a=r(5),c=r(15),s=function(e){function t(t,r){var n=e.call(this,{},t)||this,s=t.development?"testing":t.appName;c.isBotUserAgent(c.userAgent())&&(s="bot-traffic"),n.emitEvent=function(e,t){i.load(s,e,t)};var u="",p="",d="";return"iframe"!==t.embedMode&&(u=a.longTerm(),p=a.shortTerm(),d=a.firstSeen()),n.defaultAttributes={appName:t.appName,uniqToken:u,visitToken:p,microSessionId:a.buildToken(),microSessionCount:0,firstSeen:d},t.defaultAttributes&&(n.defaultAttributes=o.Integration.merge(t.defaultAttributes,n.defaultAttributes)),"parent"===t.embedMode&&n.installFrameListener(),r(),n}return n(t,e),t.prototype.identify=function(e){this.emit("identify",e)},t.prototype.page=function(e){t.isEqualPage(this.lastPage,e)||(this.lastPage=e,this.emit("page",e))},t.prototype.track=function(e){this.emit("track",e)},t.prototype.emit=function(e,t,r){void 0===r&&(r={});var n=this.options;r.microSessionCount||++this.defaultAttributes.microSessionCount,t=o.Integration.flatten(t);var a=o.Integration.merge(t,this.defaultAttributes);if(a.eventType=e,a=o.Integration.merge(a,r),"iframe"===n.embedMode&&n.embedParentOrigin)try{this.getEmbedParent().postMessage(JSON.stringify({event:"trekkie:emit:v1",payload:{requestType:e,args:a,overrideAttributes:{microSessionId:a.microSessionId,microSessionCount:a.microSessionCount}}}),n.embedParentOrigin)}catch(e){i.internalError(e)}else this.emitEvent(e,a)},t.prototype.installFrameListener=function(){var e=this;window.addEventListener("message",function(t){e.handleEmbedEvent(t)})},t.prototype.handleEmbedEvent=function(e){function t(e){return null!==e.match(/(shopify.com|shopifyapps.com|myshopify.io|shopifycloud.com|oberlo.com)$/)}function r(e){return window.Shopify&&window.Shopify.EmbeddedApp&&window.Shopify.EmbeddedApp.instance()&&window.Shopify.EmbeddedApp.instance().origin===e}try{if(!e||!e.data)return;if(!t(e.origin)&&!r(e.origin))return;var n=JSON.parse(e.data);if(!n.event||!n.event.match(/^trekkie:/))return;if(!t(e.origin)&&r(e.origin)&&"trekkie:emit:v1"!==n.event)return;switch(n.event){case"trekkie:emit:v1":var o=n.payload;o&&o.requestType&&o.args&&this.emit(o.requestType,o.args,o.overrideAttributes);break;case"trekkie:customEvent:v1":var o=n.payload;o&&o.eventType&&document.dispatchEvent(new CustomEvent(o.eventType,o.data));break;case"trekkie:xtldToken:v1":case"trekkie:xtldLastShop:v1":break;default:!function(e,t){i.internalError(new Error,JSON.stringify(t))}(n.event,n)}}catch(t){"SyntaxError"!==t.name&&i.internalError(t,JSON.stringify(e))}},t.prototype.getEmbedParent=function(){return window.top||window.parent},t.isEqualPage=function(e,t){return e&&t&&e.path===t.path&&e.referrer===t.referrer&&e.search===t.search&&e.title===t.title&&e.url===t.url&&e.name===t.name&&o.Integration.isEqual(e.properties,t.properties)},t}(o.Integration);t.Trekkie=s},function(e,t,r){"use strict";function n(e){for(var t=0,r=i;t<r.length;t++){if(r[t].test(e))return!0}return!1}function o(){return navigator.userAgent}Object.defineProperty(t,"__esModule",{value:!0});var i=[/googlebot/i,/AdsBot-Google/i,/APIs-Google/i,/Mediapartners-Google/i,/developers.google.com/i,/bingbot/i,/Slurp/i,/duckduckbot/i,/Baiduspider/i,/YandexBot/i,/Sogou/i,/Sogou.*spider/i,/Exabot/i,/facebot/i,/facebookexternalhit/i,/ia_archiver/i];t.isBotUserAgent=n,t.userAgent=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.storageName=e,this.storage=localStorage,this.storageEnabled=this.checkLocalStorageAvailability()}return e.prototype.get=function(){return this.storageEnabled?this.storage.getItem(this.storageName):null},e.prototype.set=function(e){this.storageEnabled&&this.storage.setItem(this.storageName,e)},e.prototype.checkLocalStorageAvailability=function(){try{return this.storage.setItem("test","ok"),this.storage.removeItem("test"),!0}catch(e){return(22===e.code||1014===e.code)&&(this.storage.clear(),!0)}},e}();t.LocalStorage=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(16),o=function(){function e(e){this.queue=[],this.storage=new n.LocalStorage(e);var t=this.storage.get();null!==t&&(this.queue=JSON.parse(t))}return e.prototype.push=function(e){this.queue.push(e),this.persist()},e.prototype.all=function(){return this.queue},e.prototype.clear=function(){this.queue=[],this.persist()},e.prototype.persist=function(){this.storage.set(JSON.stringify(this.queue))},e}();t.PersistedQueue=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,r){this.trekkie=e,this.requestType=t,this.eventName=r}return e.prototype.push=function(e){this.trekkie.emit(this.requestType,{event:this.eventName,properties:e})},e.prototype.all=function(){return[]},e.prototype.clear=function(){},e}();t.PostingQueue=n}]);